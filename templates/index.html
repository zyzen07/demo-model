<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroSimGreen - High-Performance AI Server Allocation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
</head>
<body>
    <!-- Firebase Configuration -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js";
        import { 
            getFirestore, collection, doc, setDoc, getDoc, getDocs, addDoc, updateDoc,
            deleteDoc, query, where, orderBy, limit, onSnapshot
        } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDPEEz6nm4SCiBq85bDG4VsQfCLf94uAE0",
            authDomain: "cloud-storage-c0971.firebaseapp.com",
            projectId: "cloud-storage-c0971",
            storageBucket: "cloud-storage-c0971.firebasestorage.app",
            messagingSenderId: "169228256203",
            appId: "1:169228256203:web:c3e0f585f74589bea5ec4e",
            measurementId: "G-8C4JPPLSFM"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        window.firebase = {
            app, db, analytics, setDoc, getDoc, getDocs, addDoc, updateDoc, 
            deleteDoc, doc, collection, query, where, orderBy, limit, onSnapshot
        };

        class OptimizedNeuroSimGreenFirebase {
            constructor() {
                this.db = db;
                this.collections = {
                    servers: 'neurosim_servers',
                    tasks: 'neurosim_tasks',
                    allocations: 'neurosim_allocations',
                    performance: 'neurosim_performance',
                    environment: 'neurosim_environment'
                };
                this.requestQueue = [];
                this.isProcessingQueue = false;
            }

            async saveData(collectionName, docId, data) {
                try {
                    await setDoc(doc(this.db, collectionName, docId), {
                        ...data,
                        firebase_timestamp: new Date(),
                        updated_at: new Date().toISOString()
                    });
                    return { success: true, docId };
                } catch (error) {
                    console.error(`Firebase Error:`, error);
                    return { success: false, error: error.message };
                }
            }

            async addData(collectionName, data) {
                // Add to queue for batch processing
                return new Promise((resolve) => {
                    this.requestQueue.push({
                        type: 'add',
                        collectionName,
                        data,
                        resolve
                    });
                    this.processQueue();
                });
            }

            async processQueue() {
                if (this.isProcessingQueue || this.requestQueue.length === 0) return;
                
                this.isProcessingQueue = true;
                const batch = this.requestQueue.splice(0, 5); // Process 5 at a time
                
                for (const request of batch) {
                    try {
                        const docRef = await addDoc(collection(this.db, request.collectionName), {
                            ...request.data,
                            firebase_timestamp: new Date(),
                            created_at: new Date().toISOString()
                        });
                        request.resolve({ success: true, docId: docRef.id });
                    } catch (error) {
                        request.resolve({ success: false, error: error.message });
                    }
                }
                
                this.isProcessingQueue = false;
                
                // Continue processing if more requests
                if (this.requestQueue.length > 0) {
                    setTimeout(() => this.processQueue(), 100);
                }
            }

            async getAllData(collectionName) {
                try {
                    const querySnapshot = await getDocs(collection(this.db, collectionName));
                    const data = [];
                    querySnapshot.forEach((doc) => {
                        data.push({ id: doc.id, ...doc.data() });
                    });
                    return { success: true, data };
                } catch (error) {
                    return { success: false, error: error.message };
                }
            }
        }

        window.neuroFirebase = new OptimizedNeuroSimGreenFirebase();
        console.log('ðŸ”¥ Optimized Firebase initialized!');
    </script>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-success">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-brain"></i> NeuroSimGreen - High-Performance AI
            </a>
            <div class="navbar-nav">
                <a class="nav-link" href="#dashboard">Dashboard</a>
                <a class="nav-link" href="#allocation">Allocation</a>
                <a class="nav-link" href="#servers">Servers</a>
                <a class="nav-link" href="#ml-model">AI Model</a>
                <a class="nav-link" href="#firebase">Firebase</a>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <!-- System Status Alert -->
        <div class="row mb-3">
            <div class="col-md-12">
                <div id="systemAlert" class="alert alert-info alert-dismissible fade show" role="alert">
                    <i class="fas fa-info-circle"></i> <strong>System Status:</strong> 
                    <span id="systemStatusText">Initializing high-performance NeuroSimGreen...</span>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
            <h2><i class="fas fa-tachometer-alt"></i> Real-Time Performance Dashboard</h2>
            
            <!-- Enhanced Metrics Cards -->
            <div class="row mb-4">
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card metric-card bg-primary text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-server fa-2x mb-2"></i>
                            <h5 class="card-title">Total Servers</h5>
                            <h3 id="total-servers">15</h3>
                            <small>Infrastructure</small>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card metric-card bg-success text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-check-circle fa-2x mb-2"></i>
                            <h5 class="card-title">Active</h5>
                            <h3 id="active-servers">--</h3>
                            <small>Processing</small>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card metric-card bg-info text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-microchip fa-2x mb-2"></i>
                            <h5 class="card-title">CPU Available</h5>
                            <h3 id="avg-cpu-available">--%</h3>
                            <small>Capacity</small>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card metric-card bg-warning text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-thermometer-half fa-2x mb-2"></i>
                            <h5 class="card-title">Temperature</h5>
                            <h3 id="avg-temperature">--Â°C</h3>
                            <small>Thermal</small>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card metric-card bg-danger text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-leaf fa-2x mb-2"></i>
                            <h5 class="card-title">Carbon</h5>
                            <h3 id="carbon-intensity">--</h3>
                            <small>g COâ‚‚/kWh</small>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card metric-card bg-secondary text-white">
                        <div class="card-body text-center">
                            <i class="fas fa-tasks fa-2x mb-2"></i>
                            <h5 class="card-title">Threads</h5>
                            <h3 id="active-threads">--</h3>
                            <small>Active</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Performance Metrics -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5>Power</h5>
                            <h3 id="total-power" class="text-warning">-- kW</h3>
                            <small class="text-muted">Consumption</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5>Tasks</h5>
                            <h3 id="total-tasks-processed" class="text-success">--</h3>
                            <small class="text-muted">Processed</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5>Uptime</h5>
                            <h3 id="system-uptime" class="text-info">-- hrs</h3>
                            <small class="text-muted">System</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5>Emissions</h5>
                            <h3 id="carbon-emissions" class="text-danger">-- kg/hr</h3>
                            <small class="text-muted">Carbon</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Optimized Charts -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-bar"></i> Server Load (Top 10)</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="serverLoadChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-thermometer-half"></i> Temperature Monitor</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="temperatureChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-bolt"></i> Power Consumption</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="powerChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-layer-group"></i> Server Tiers</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="serverTierChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Task Allocation Section -->
        <div id="allocation" class="section">
            <h2><i class="fas fa-microchip"></i> AI-Powered Task Allocation</h2>
            
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-plus-circle"></i> Submit Task</h5>
                        </div>
                        <div class="card-body">
                            <form id="taskForm">
                                <div class="mb-3">
                                    <label for="taskType" class="form-label">Task Type</label>
                                    <select class="form-control" id="taskType">
                                        <option value="Web-Request">Web Request</option>
                                        <option value="Data-Analysis">Data Analysis</option>
                                        <option value="ML-Training">ML Training</option>
                                        <option value="File-Processing">File Processing</option>
                                        <option value="Database-Query">Database Query</option>
                                        <option value="Video-Processing">Video Processing</option>
                                    </select>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="cpuRequirement" class="form-label">CPU (%)</label>
                                            <input type="number" class="form-control" id="cpuRequirement" min="1" max="100" value="25">
                                            <div class="form-text"><span id="cpuReqDisplay">25%</span></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="ramRequirement" class="form-label">RAM (GB)</label>
                                            <input type="number" class="form-control" id="ramRequirement" min="0.1" step="0.1" value="4">
                                            <div class="form-text"><span id="ramReqDisplay">4 GB</span></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="diskRequirement" class="form-label">Disk (GB)</label>
                                            <input type="number" class="form-control" id="diskRequirement" min="0.01" step="0.01" value="1">
                                            <div class="form-text"><span id="diskReqDisplay">1 GB</span></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="burstTime" class="form-label">Time (sec)</label>
                                            <input type="number" class="form-control" id="burstTime" min="0.1" step="0.1" value="120">
                                            <div class="form-text"><span id="burstTimeDisplay">2 minutes</span></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="priority" class="form-label">Priority</label>
                                    <select class="form-control" id="priority">
                                        <option value="Low">Low</option>
                                        <option value="Medium" selected>Medium</option>
                                        <option value="High">High</option>
                                        <option value="Critical">Critical</option>
                                    </select>
                                </div>
                                
                                <button type="submit" class="btn btn-primary btn-lg w-100">
                                    <i class="fas fa-rocket"></i> Allocate with AI
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-brain"></i> AI Results</h5>
                        </div>
                        <div class="card-body">
                            <div id="allocationResult">
                                <div class="text-center text-muted">
                                    <i class="fas fa-robot fa-3x mb-3"></i>
                                    <p>Submit a task for AI-powered allocation...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Server Status Section -->
        <div id="servers" class="section">
            <h2><i class="fas fa-server"></i> Server Status & Analysis</h2>
            
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5><i class="fas fa-list"></i> Server Comparison (Top 10)</h5>
                            <div>
                                <button id="refreshServers" class="btn btn-outline-success btn-sm me-2">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                                <div class="btn-group" role="group">
                                    <input type="radio" class="btn-check" name="serverFilter" id="filterAll" autocomplete="off" checked>
                                    <label class="btn btn-outline-primary btn-sm" for="filterAll">All</label>
                                    
                                    <input type="radio" class="btn-check" name="serverFilter" id="filterHighEnd" autocomplete="off">
                                    <label class="btn btn-outline-primary btn-sm" for="filterHighEnd">High-End</label>
                                    
                                    <input type="radio" class="btn-check" name="serverFilter" id="filterMidRange" autocomplete="off">
                                    <label class="btn btn-outline-primary btn-sm" for="filterMidRange">Mid-Range</label>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="serverComparisonTable">
                                <div class="skeleton-loader">
                                    <div class="d-flex justify-content-between mb-3">
                                        <div class="skeleton skeleton-text" style="width: 200px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 100px;"></div>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <div class="skeleton skeleton-text" style="width: 150px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 100px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 80px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 60px;"></div>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <div class="skeleton skeleton-text" style="width: 150px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 100px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 80px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 60px;"></div>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <div class="skeleton skeleton-text" style="width: 150px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 100px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 80px;"></div>
                                        <div class="skeleton skeleton-text" style="width: 60px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ML Model Section -->
        <div id="ml-model" class="section">
            <h2><i class="fas fa-brain"></i> Optimized AI Model Performance</h2>
            
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-line"></i> Model Accuracy</h5>
                        </div>
                        <div class="card-body">
                            <div id="modelPerformance">
                                <div class="skeleton-loader">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="skeleton skeleton-card mb-2"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="skeleton skeleton-card mb-2"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-weight-hanging"></i> Feature Importance (Top 8)</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="featureImportanceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Optimized Simulation Section -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-play-circle"></i> High-Performance Simulation</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label for="numTasks" class="form-label">Tasks (Max 50)</label>
                                        <input type="number" class="form-control" id="numTasks" value="30" min="10" max="50">
                                        <small class="form-text text-muted">Optimized limit</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label for="simulationDuration" class="form-label">Duration (Max 200)</label>
                                        <input type="number" class="form-control" id="simulationDuration" value="100" min="50" max="200">
                                        <small class="form-text text-muted">Time units</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label for="simulationType" class="form-label">Type</label>
                                        <select class="form-control" id="simulationType">
                                            <option value="balanced">Balanced</option>
                                            <option value="cpu-intensive">CPU Heavy</option>
                                            <option value="memory-intensive">Memory Heavy</option>
                                            <option value="mixed">Mixed</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <label class="form-label">&nbsp;</label>
                                        <br>
                                        <button id="runSimulation" class="btn btn-success w-100">
                                            <i class="fas fa-play"></i> Run AI Simulation
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div id="simulationResults" class="mt-3">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle"></i> 
                                    <strong>Ready:</strong> Optimized for high-performance simulation testing.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Firebase Integration Section -->
        <div id="firebase" class="section">
            <h2><i class="fas fa-database"></i> Firebase Cloud Sync</h2>
            
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-cloud-upload-alt"></i> Upload Data</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button id="saveServersToFirebase" class="btn btn-primary">
                                    <i class="fas fa-server"></i> Save Servers (10)
                                </button>
                                <button id="saveTrainingDataToFirebase" class="btn btn-secondary">
                                    <i class="fas fa-brain"></i> Save Training Data (100)
                                </button>
                                <button id="saveAllToFirebase" class="btn btn-success">
                                    <i class="fas fa-cloud"></i> Save All (Optimized)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-cloud-download-alt"></i> Download Data</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button id="loadServersFromFirebase" class="btn btn-outline-primary">
                                    <i class="fas fa-download"></i> Load Servers
                                </button>
                                <button id="loadAllocationsFromFirebase" class="btn btn-outline-secondary">
                                    <i class="fas fa-history"></i> Load History
                                </button>
                                <button id="loadAllFromFirebase" class="btn btn-outline-success">
                                    <i class="fas fa-sync"></i> Sync All
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Firebase Status -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-info-circle"></i> Connection Status</h5>
                        </div>
                        <div class="card-body">
                            <div id="firebaseStatus">
                                <div class="d-flex align-items-center">
                                    <div class="spinner-border spinner-border-sm text-primary me-2" role="status"></div>
                                    <span>Initializing Firebase connection...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Optimized Loading Modal -->
    <div class="modal fade" id="loadingModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center p-4">
                    <div class="spinner-border text-success mb-3" style="width: 3rem; height: 3rem;" role="status">
                        <span class="visually-hidden">Processing...</span>
                    </div>
                    <h5 id="loadingTitle">Processing</h5>
                    <p id="loadingMessage" class="text-muted">Optimizing performance...</p>
                    <div class="progress mt-3">
                        <div id="loadingProgress" class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="notificationToast" class="toast" role="alert">
            <div class="toast-header">
                <i id="toastIcon" class="fas fa-check-circle text-success me-2"></i>
                <strong id="toastTitle" class="me-auto">Success</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                Operation completed successfully!
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    
    <!-- Performance Monitoring -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Performance optimizations
        document.documentElement.style.scrollBehavior = 'auto';
        
        // Preload critical endpoints
        fetch('/api/dashboard-data').catch(() => {});
        
        // Performance monitoring
        if ('PerformanceObserver' in window) {
            const perfObserver = new PerformanceObserver((list) => {
                const entries = list.getEntries();
                entries.forEach((entry) => {
                    if (entry.duration > 1000) {
                        console.warn(`Slow operation: ${entry.name} took ${entry.duration}ms`);
                    }
                });
            });
            perfObserver.observe({entryTypes: ['measure', 'navigation']});
        }
    });
    </script>
</body>
</html>
